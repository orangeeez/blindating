<div id="dashboard" #dashboard>
    <div class="container-fluid">
        <div class="row" #dashboardStats
             style="margin-bottom: 20px">
            <div class="col-md-4"
                 [style.height]="isPopularUsersLoaded ? 'inherit' : '140px'"
                 [style.border-right]="isActiveExpanded ? 'none' : '1px solid #e7e7e7'">
                <div *ngIf="!isPopularUsersLoaded">
                    <i class="fa fa-circle-o-notch fa-spin fa-2x fa-fw image-loading image-stats-loading"></i>
                </div>
                <div class="category"
                     [style.pointer-events]="isPopularUsersLoaded ? 'all' : 'none'"
                     (click)="onExpandPopular()">
                    Most popular
                    <i class="fa fa-arrow-right" style="padding-left: 10px"></i>
                </div>
                <div *ngIf="isPopularUsersLoaded">
                    <div *ngFor="let user of popularUsers" class="col-md-3 profile"
                         [style.justify-content]="isPopularExpanded ? 'flex-start' : 'center'"
                         [style.align-items]="isPopularExpanded ? 'flex-start' : 'center'"
                         [style.border-bottom]="isPopularExpanded ? '1px solid #e7e7e7' : 'none'"
                         [class.col-md-3]="!isPopularExpanded"
                         [class.col-md-12]="isPopularExpanded"
                         [class.selected]="user.id == app.selectedUser?.id"
                         (click)="app.selectDeselectUser(user)">
                        <div>
                            <img [src]="user.image" class="img-circle avatar-decoration"
                                 [class.blur]="!user.isVideoShared" />
                            <div [hidden]="isPopularExpanded">{{user.firstname}}</div>
                            <div [hidden]="isPopularExpanded">{{user.lastname}}</div>
                            <img src="../../../images/app/controls/online.png" class="online-decoration"
                                 [hidden]="!user.online" />
                        </div>
                        <div *ngIf="isPopularExpanded">
                            <div class="row row-expanded">
                                <div class="col-md-12 no-padding"
                                     [style.font-weight]="'bold'"
                                     [style.font-size]="'larger'">{{user.firstname + " " + user.lastname}}</div>
                            </div>
                            <div class="row row-expanded">
                                <div class="col-md-12 no-padding">
                                    <div class="col-md-4">
                                        Talks
                                        <div class="digit">{{user.conversationsCount}}</div>
                                    </div>
                                    <div class="col-md-4">
                                        Wishes
                                        <div class="digit">{{user.feedbacksCount}}</div>
                                    </div>
                                    <div class="col-md-4">
                                        Answered
                                        <div class="digit">{{user.answersCount}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4"
                 [style.height]="isActiveUsersLoaded ? 'inherit' : '140px'"
                 [style.border-left]="isActiveExpanded ? '1px solid #e7e7e7' : 'none'"
                 [style.border-right]="isActiveExpanded ? '1px solid #e7e7e7' : 'none'">
                <div *ngIf="!isActiveUsersLoaded">
                    <i class="fa fa-circle-o-notch fa-spin fa-2x fa-fw image-loading"></i>                    
                </div>
                <div class="category"
                     [style.pointer-events]="isActiveUsersLoaded ? 'all' : 'none'"
                     (click)="onExpandActive()">
                    Most active
                    <i class="fa fa-arrow-right" style="padding-left: 10px"></i>
                </div>
                <div *ngIf="isActiveUsersLoaded">
                    <div *ngFor="let user of activeUsers" class="col-md-3 profile"
                         [style.justify-content]="isActiveExpanded ? 'flex-start' : 'center'"
                         [style.align-items]="isActiveExpanded ? 'flex-start' : 'center'"
                         [style.border-bottom]="isActiveExpanded ? '1px solid #e7e7e7' : 'none'"
                         [class.col-md-3]="!isActiveExpanded"
                         [class.col-md-12]="isActiveExpanded"
                         [class.selected]="user.id == app.selectedUser?.id"
                         (click)="app.selectDeselectUser(user)">
                        <div>
                            <img [src]="user.image" class="img-circle avatar-decoration"
                                 [class.blur]="!user.isVideoShared" />
                            <div [hidden]="isActiveExpanded">{{user.firstname}}</div>
                            <div [hidden]="isActiveExpanded">{{user.lastname}}</div>
                            <img src="../../../images/app/controls/online.png" class="online-decoration"
                                 [hidden]="!user.online" />
                        </div>
                        <div *ngIf="isActiveExpanded">
                            <div class="row row-expanded">
                                <div class="col-md-12 no-padding"
                                     [style.font-weight]="'bold'"
                                     [style.font-size]="'larger'">{{user.firstname + " " + user.lastname}}</div>
                            </div>
                            <div class="row row-expanded">
                                <div class="col-md-12 no-padding">
                                    <div class="col-md-4">
                                        Talks
                                        <div class="digit">{{user.conversationsCount}}</div>
                                    </div>
                                    <div class="col-md-4">
                                        Wishes
                                        <div class="digit">{{user.feedbacksCount}}</div>
                                    </div>
                                    <div class="col-md-4">
                                        Answered
                                        <div class="digit">{{user.answersCount}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4"
                 [style.height]="isNewUsersLoaded ? 'inherit' : '140px'"
                 [style.border-left]="isActiveExpanded ? 'none' : '1px solid #e7e7e7'">
                <div *ngIf="!isNewUsersLoaded">
                    <i class="fa fa-circle-o-notch fa-spin fa-2x fa-fw image-loading image-stats-loading"></i>
                </div>
                <div class="category"
                     (click)="onExpandNew()">
                    New
                    <i class="fa fa-arrow-right" style="padding-left: 10px"></i>
                </div>
                <div *ngIf="isNewUsersLoaded">
                    <div *ngFor="let user of newUsers" class="col-md-3 profile"
                         [style.justify-content]="isNewExpanded ? 'flex-start' : 'center'"
                         [style.align-items]="isNewExpanded ? 'flex-start' : 'center'"
                         [style.border-bottom]="isNewExpanded ? '1px solid #e7e7e7' : 'none'"
                         [class.col-md-3]="!isNewExpanded"
                         [class.col-md-12]="isNewExpanded"
                         [class.selected]="user.id == app.selectedUser?.id"
                         (click)="app.selectDeselectUser(user)">
                        <div>
                            <img [src]="user.image" class="img-circle avatar-decoration"
                                 [class.blur]="!user.isVideoShared" />
                            <div [hidden]="isNewExpanded">{{user.firstname}}</div>
                            <div [hidden]="isNewExpanded">{{user.lastname}}</div>
                            <img src="../../../images/app/controls/online.png" class="online-decoration"
                                 [hidden]="!user.online" />
                        </div>
                        <div *ngIf="isNewExpanded">
                            <div class="row row-expanded">
                                <div class="col-md-12 no-padding"
                                     [style.font-weight]="'bold'"
                                     [style.font-size]="'larger'">{{user.firstname + " " + user.lastname}}</div>
                            </div>
                            <div class="row row-expanded">
                                <div class="col-md-12 no-padding">
                                    <span [style.font-size]="'13px'">Phrase:</span>
                                    <span [style.color]="'#93e6ff'"
                                          [style.font-weight]="'bold'">{{user.phrase}}</span>
                                </div>
                                <div class="col-md-12 no-padding">
                                    <span [style.font-size]="'13px'">Joined:</span>
                                    <span [style.font-weight]="'bold'">{{user.registered | date: 'fullDate'}}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div [hidden]="isNewExpanded    ||
                       isActiveExpanded ||
                       isPopularExpanded">
            <div class="row">
                <div class="col-md-1 header">
                    Activities
                </div>
            </div>
            <div class="row">
                <div *ngIf="!activites" class="col-md-12 no-activities">No current activities</div>
            </div>
        <div [hidden]="isNewExpanded    ||
                       isActiveExpanded ||
                       isPopularExpanded">
            <div class="row">
                <div class="col-md-1 header"
                     style="width: inherit">
                    Board
                    <i class="fa fa-refresh refresh"
                       (click)="onRefreshUsers()"></i>
                </div>
                <d-search-component
                                    [app]="app"></d-search-component>
            </div>
            <div *ngIf="!isUsersLoaded">
                <i class="fa fa-circle-o-notch fa-spin fa-2x fa-fw image-loading image-stats-loading"></i>
            </div>
            <div *ngIf="isUsersLoaded &&
                        !isSearchShow" class="row">
                <div *ngFor="let user of app.users" class="col-md-1 profile"
                     [class.selected]="user.id == app.selectedUser?.id"
                     (click)="app.selectDeselectUser(user)">
                    <div>
                        <img [src]="user.image" class="img-circle avatar-decoration avatar-dashboard"
                             [class.blur]="!user.isVideoShared" />
                        <div class="name-dashboard">{{user.firstname}}</div>
                        <img src="../../../images/app/controls/online.png" class="online-decoration"
                             [hidden]="!user.online" />
                    </div>
                </div>
            </div>
            <div *ngIf="isSearchShow" class="row">
                <div *ngIf="searchUsers.length == 0" class="no-activities">No search results</div>
                <div *ngFor="let user of searchUsers" class="col-md-1 profile"
                     [class.selected]="user.id == app.selectedUser?.id"
                     (click)="app.selectDeselectUser(user)">
                    <div>
                        <img [src]="user.image" class="img-circle avatar-decoration avatar-dashboard"
                             [class.blur]="!user.isVideoShared" />
                        <div class="name-dashboard">{{user.firstname}}</div>
                        <img src="../../../images/app/controls/online.png" class="online-decoration"
                             [hidden]="!user.online" />
                    </div>
                </div>
            </div>
            <!--<div class="pickup-form"
                 [@pickupState]="pickupState"
                 (@pickupState.done)="onPickupDone($event)">
                <div *ngIf="app.isPickupShow" class="row">
                    <div class="col-md-2">
                        <img class="img-circle avatar-decoration" src="images\users\evkb2qif.txr.jpg">
                    </div>
                    <div class="col-md-2">
                        <div class="coincidence">
                            87 points
                        </div>
                        <div class="progress">
                            <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 45%">
                                45%
                            </div>
                        </div>
                        <div class="rating">
                            <span>☆</span><span>☆</span><span>☆</span><span>☆</span><span>☆</span>
                        </div>
                    </div>
                    <div class="col-md-2 preferences">
                        <div><i class="fa fa-check" aria-hidden="true"></i>Gender</div>
                        <div><i class="fa fa-check" aria-hidden="true"></i>Age</div>
                        <div><i class="fa fa-check" aria-hidden="true"></i>Location</div> 
                        <div><i style="color: #d43f3a" class="fa fa-close" aria-hidden="true"></i>Hair</div>                
                        <div><i class="fa fa-check" aria-hidden="true"></i>Eyes</div>
                        <div><i class="fa fa-check" aria-hidden="true"></i>Hobby</div>                                                                                                              
                    </div>
                    <div class="col-md-4 questions">
                        <div class="question">
                            <div class="qheader">Matched questions</div>
                            <div class="body"></div>
                        </div>
                    </div>
                    <div class="col-md-2 buttons">
                        <div><button type="button" class="btn btn-success"
                                     (click)="onPickupInvite()">INVITE</button></div>
                        <div><button type="button" class="btn btn-danger"
                                     (click)="onPickupDecline()">DECLINE</button></div>
                    </div>
                </div>
            </div>-->
        </div>
    </div>
</div>